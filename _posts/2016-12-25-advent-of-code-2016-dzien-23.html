---
layout: post
status: publish
published: true
title: Advent of Code 2016 dzień 23
author:
  display_name: Marcin Pietraszek
  login: marcin
  email: m.pietraszek@gmail.com
  url: ''
author_login: marcin
author_email: m.pietraszek@gmail.com
excerpt: "Advent of Code 2016 dzień 23. Okazuje się, że język assembunny, dla którego
  emulator potrzebny był w dniu 12 jest bardziej rozbudowany. Musisz rozszerzyć swój
  emulator o dodatkową instrukcję.\r\n\r\n"
wordpress_id: 712
wordpress_url: http://www.samouczekprogramisty.pl/?p=712
date: '2016-12-25 08:37:39 +0100'
date_gmt: '2016-12-25 07:37:39 +0100'
categories:
- Strefa zadaniowa
tags: []
comments: []
---
<p>Advent of Code 2016 dzień 23. Okazuje się, że język assembunny, dla którego emulator potrzebny był w dniu 12 jest bardziej rozbudowany. Musisz rozszerzyć swój emulator o dodatkową instrukcję.</p>
<p><a id="more"></a><a id="more-712"></a></p>
<h1>Wprowadzenie</h1><br />
[idea]Oryginalna strona z zadaniami z <a href="http://adventofcode.com/2016" target="_blank">Advent of Code 2016</a>. Zadanie z artykułu dostępne jest pod adresem <a href="http://adventofcode.com/2016/day/23" target="_blank">http://adventofcode.com/2016/day/21</a>[/idea]</p>
<p>Advent of Code to inicjatywa, w której codziennie publikowane są zadania algorytmiczne dla programistów. Ich rozwiązywanie pomaga rozwijać umiejętności nie tyko początkujących programistów. W tej serii artykułów pokazuję zadanie opublikowane w ramach Advent of Code 2016 wraz z przykładowym rozwiązaniem.</p>
<p>[idea]Jeśli masz ochotę na odrobinę rywalizacji możesz dołączyć do klasyfikacji, którą założyłem na oryginalnej stronie. Aby dołączyć do tej klasyfikacji zaloguj się na <a href="http://adventofcode.com/2016" target="_blank">http://adventofcode.com/2016</a> i dołącz wpisując kod <code>124245-88569bd0</code>.[/idea]</p>
<h1>Dzień 23 zadanie 1</h1><br />
Dzięki Twojej pomocy wczoraj udało się znaleźć odpowiednie <a href="http://www.samouczekprogramisty.pl/advent-of-code-2016-dzien-22/">pary maszyn w klastrze</a>. Znajdujesz się na jednym z górnych pięter najwyższego budynku w Kwaterze Głównej Króliczka Wielkanocnego. Prywatne biuro Króliczka znajduje się właśnie tutaj, wraz z sejfem ukrytym za obrazem. Kto nie schowałby cennych dokumentów w sejfie ukrytym właśnie tam?</p>
<p>Sejf ma wyświetlacz cyfrowy i klawiaturę, na której trzeba wpisać odpowiedni kod. Żółta karteczka przyczepiona do sejfu daje wskazówkę dotyczącą hasła: "jajka". Na obrazie z dużym królikiem malującym jajka, doliczyłeś się <code>7</code> jajek.</p>
<p>Kiedy próbujesz wpisać kod nic nie pojawia się na ekranie. Zamiast tego klawiatura rozpada się w Twoich rękach. Najwyraźniej została wcześniej zniszczona. Pod spodem ma swego rodzaju gniazdo, takie do którego pasuje Twój <a href="http://www.samouczekprogramisty.pl/advent-of-code-2016-dzien-11/">prototypowy komputer</a>. Rozmontowując roztrzaskaną klawiaturę wyciągasz układ logiczny ze środka, podłączasz go do swojego komputera, który następie podłączasz do sejfu.</p>
<p>Teraz musisz tylko dowiedzieć się jakie wyjście wyprodukowałaby klawiatura po naciśnięciu odpowiedniego klawisza. Wyciągasz kod assembunny z chipa (wejście do programu).</p>
<p>Kod wygląda, prawie dokładnie jak ten, który użyty był poprzednio do <a href="http://www.samouczekprogramisty.pl/advent-of-code-2016-dzien-12/">sterowania kolejką</a>! Powinieneś być w stanie użyć tego samego interpretera, którego użyłeś poprzednio. Wymagał on będzie jednak drobnego rozszerzenia o jedną nową instrukcję:</p>
<ul>
<li><code>tgl x</code> przełącza instrukcję znajdującą się <code>x</code> pozycji dalej, <code>x</code> wskazuje na instrukcje podobnie jak <code>jnz</code>. Dodatnia wartość oznacza instrukcję z przodu, ujemna z tyłu.</li><br />
</ul><br />
Instrukcja <code>tgl</code> działa w następujący sposób:</p>
<ul>
<li>dla jednoargumentowych instrukcji, <code>inc</code> staje się <code>dec</code>, każda inna jednoargumentowa instrukcja staje się <code>inc</code>,</li>
<li>dla dwuargumentowych instrukcji, <code>jnz</code> staje się <code>cpy</code>, każda inna dwuargumentowa instrukcja staje się <code>jnz</code>,</li>
<li>argumenty przełączanej instrukcji nie są zmieniane,</li>
<li>jeśli <code>tgl</code> próbuje przełączyć instrukcję znajdującą się poza programem, nic się nie dzieje,</li>
<li>jeśli <code>tgl</code> wyprodukuje niepoprawną instrukcje (na przykład <code>cpy 1 2</code>) i później interpreter spróbuje wywołać taką instrukcję, powinien ją ominąć,</li>
<li>jeśli <code>tgl</code> przełącza samą siebie (na przykład jeśli <code>a</code> ma wartość <code>0</code>, <code>tgl a</code> przełączy się na <code>inc a</code>), wynikowa instrukcja nie jest wywołana dopóki interpreter nie dotrze do niej po raz kolejny.</li><br />
</ul><br />
Na przykład jeśli pod uwagę weźmiesz taki program:</p>
<pre class="lang:default highlight:0 decode:true ">cpy 2 a<br />
tgl a<br />
tgl a<br />
tgl a<br />
cpy 1 a<br />
dec a<br />
dec a</pre></p>
<ol>
<li><code>cpy 2 a</code> inicjalizuje rejestr <code>a</code> wartością 2,</li>
<li>pierwsza instrukcja <code>tgl a</code> przełącza instrukcję odległą o wartość rejestru <code>a</code> (2), w wyniku czego zmienia trzecią instrukcję <code>tgl a</code> na <code>inc a</code>,</li>
<li>druga instrukcja <code>tgl a</code> także zmienia instrukcje oddaloną o 2, co zmienia <code>cpy 1 a</code> na <code>jnz 1 a</code>,</li>
<li>czwarta linia, która teraz jest <code>inc a</code> zwiększa o jeden <code>a</code> do wartości 3,</li>
<li>ostatecznie piąta linia, która jest teraz <code>jnz 1 a</code> skacze o <code>a</code> (3) instrukcji do przodu przeskakując obie instrukcje <code>dec a</code>.</li><br />
</ol><br />
W tym przykładzie ostateczna wartość rejestru <code>a</code> to 3.</p>
<p>Pozostała część układu scalonego zdaje się ustawiać wartość rejestru <code>a</code> na wejście z klawiatury (liczbę jajek z obrazu, 7), uruchamia kod i przesyła wynikową wartość rejestru <code>a</code> do sejfu.</p>
<p>Zakładając, że lista poleceń znajduje się w <a href="https://raw.githubusercontent.com/SamouczekProgramisty/StrefaZadaniowaSamouka/master/05_aoc_2016/src/main/test/resources/day23_input.txt" target="_blank">tym pliku</a>, jaka wartość zostanie przesłana do sejfu?</p>
<h1>Podsumowanie</h1><br />
Zachęcam do dalszej zabawy z drugim zadaniem, jego treść pokaże się na stronie AoC2016 po rozwiązaniu pierwszego. Takie zadania pomagają w rozwijaniu umiejętności nie tylko początkujących programistów. Jeśli będziesz miał jakikolwiek problem z rozwiązaniem zadania możesz rzucić okiem do <a href="https://github.com/SamouczekProgramisty/StrefaZadaniowaSamouka/tree/master/05_aoc_2016/src/main/java/pl/samouczekprogramisty/szs/aoc2016/day23" target="_blank">przykładowego rozwiązania</a>, jednak zrób to raczej w ostateczności.</p>
<p>Na koniec mam do Ciebie prośbę - podziel się linkiem do artykułu ze znajomymi, może Oni także będą chcieli pomóc Świętemu Mikołajowi ;) ? Jeśli nie chcesz ominąć kolejnych artykułów proszę zapisz się do mojego newslettera i polub stronę na facebooku. Do następnego razu!</p>
<p>[FM_form id="3"]</p>
<p>Zdjęcie dzięki uprzejmości https://www.flickr.com/photos/derekl/sets/72157649148835567</p>
