---
layout: post
status: publish
published: true
title: XML dla początkujących
author:
  display_name: Marcin Pietraszek
  login: marcin
  email: m.pietraszek@gmail.com
  url: ''
author_login: marcin
author_email: m.pietraszek@gmail.com
excerpt: "W artykule tym przeczytasz o tym czym jest format XML. Poznasz kilka bibliotek
  czy specyfikacji używanych do przetwarzania tego formatu. Przeczytasz o wadach i
  zaletach pracy z plikami XML, poznasz też przykłady praktycznego zastosowania takiego
  formatu zapisu danych. Zapraszam do artykułu.\r\n\r\n"
wordpress_id: 754
wordpress_url: http://www.samouczekprogramisty.pl/?p=754
date: '2017-03-02 23:37:42 +0100'
date_gmt: '2017-03-02 22:37:42 +0100'
categories:
- Wiedza ogólna
- DSP2017
tags: []
---
<p>W artykule tym przeczytasz o tym czym jest format XML. Poznasz kilka bibliotek czy specyfikacji używanych do przetwarzania tego formatu. Przeczytasz o wadach i zaletach pracy z plikami XML, poznasz też przykłady praktycznego zastosowania takiego formatu zapisu danych. Zapraszam do artykułu.</p>
<p><a id="more"></a><a id="more-754"></a></p>
<h1>Czym jest XML</h1><br />
XML (ang.<em> Extensible Markup Language</em>) to specyfikacja zapisu danych, która została opracowana w 1998 roku przez W3C (ang. <em>World Wide Web Consortium</em>). Jest to format tekstowy, który pozwana na zapisywanie danych w postaci, która jest łatwa do odczytu zarówno przez maszyny jak i przez ludzi [1. Moim zdaniem skomplikowane pliki XML w cale nie są czytelne dla ludzi, ale to już temat na osobną dyskusję ;).].</p>
<p>Aby dane w formacie XML uważano za poprawne muszą one mieć pewną strukturę, proszę spójrz na przykład poniżej, który pokazuje poprawne dane w formacie XML:</p>
<pre class="lang:default decode:true"><?xml version="1.0" encoding="UTF-8"?><br />
<kurs-java><br />
    <artykul publikacja=&rdquo;2017-03-01&rdquo;><br />
        <tytul>Wprowadzenie do XML w Javie</tytul><br />
        <autor>Marcin Pietraszek</autor><br />
    </artykul><br />
    <artykul><br />
        <!-- do uzupelnienia --><br />
    </artykul><br />
    <opis status=&rdquo;do uzupelnienia&rdquo;/><br />
    <wydawca:opis>Zestaw artykułów dotyczących programowania w języku Java</wydawca:opis><br />
</kurs-java></pre><br />
Przykładowy dokument powyżej może służyć do opisu kursu programowania Java znajdującego się na Samouczku. Równie dobrze możesz stworzyć plik, który zawierał będzie informacje na temat pogody, stopni w szkole czy jakiegokolwiek innego tematu.</p>
<h1>Opis formatu XML</h1><br />
Dokument XML składa się z zagnieżdżonych elementów. Są one zapisywane jako znaczniki w postaci <code><znacznik></znacznik></code>.</p>
<p>[idea]Na początek drobna dygresja na temat węzłów i elementów. Czytając inne źródła po polsku na temat XML natkniesz się na nazwę węzeł. Sam próbując znaleźć poprawny odpowiednik w języku polskim nie znalazłem zbyt wielu wzmianek o węzłach (ang. <em>node</em>) w <a href="https://www.w3.org/TR/2008/REC-xml-20081126/" target="_blank">specyfikacji</a>. Specyfikacja opisuje elementy (ang. <em>element</em>). Dlatego w tym artykule posługiwał będę się wyłącznie określeniem element. Z racji tego, że XML ma strukturę drzewiastą, a w &ldquo;pracy z drzewami&rdquo; mówi się o węzłach często też ten termin używany jest w odniesieniu do elementów dokumentu XML.[/idea]</p>
<h2>Element główny</h2><br />
Każdy poprawny dokument XML musi mieć wyłącznie jeden element główny (ang. <em>root element</em>). W przykładzie powyżej jest to element <code><kurs-java></code>.</p>
<h2>Zawartość elementów</h2><br />
Elementy wewnątrz mogą zawierać treść. Na przykład wewnątrz elementu <code><tytul></code> znajduje się treść <code>Wprowadzenie do XML w Javie</code>.</p>
<p>Elementy wewnątrz mogą zawierać kolejne elementy. Na przykład element <code><artykul></code> zawiera wewnątrz elementy <code><tytul></code> i <code><autor></code>. Można to porównać do drzewa gdzie z jednego pnia (elementu głównego) wyrasta kilka gałęzi (elementów zagnieżdżonych), zakończonych liśćmi. W praktyce mówiąc o liściach dokumentu XML mamy na myśli właśnie te najbardziej zagnieżdżone elementy. W naszym przykładzie będą to na przykład <code><tytul></code> czy <code><autor></code>.</p>
<h2>Atrybuty</h2><br />
Elementy mogą posiadać dowolną liczbę atrybutów. Za przykład mogą posłużyć tu element <code><artykul></code> zawierający atrybut <code>publikacja</code>. Zawartość atrybutu to zwykły tekst. W przeciwieństwie do elementów nie możemy stosować &ldquo;zagnieżdżania&rdquo; - wewnątrz atrybutu nie możemy umieścić niczego poza jego wartością.</p>
<h2>Przestrzenie nazw</h2><br />
Nazwy elementów elementów i atrybutów mogą zawierać tak zwaną &ldquo;przestrzeń nazw&rdquo; (ang. <em>namespace</em>). Do oddzielenia nazwy elementu czy atrybutu od przestrzeni nazw używa się dwukropka. W przykładzie powyżej element <code><wydawca:opis></code> pochodzi z przestrzeni nazw <code>wydawca</code>.</p>
<p>Przestrzenie nazw stosuje się aby móc odróżnić znaczenie elementów o tej samej nazwie. W przykładzie elementy <code><opis></code> i <code><wydawca:opis></code> mogą zawierać zupełnie różne dane - różne rodzaje opisów.</p>
<h2>Komentarze</h2><br />
Wewnątrz dokumentu XML możesz umieszczać komentarze. W przykładzie powyżej komentarz to <code><!-- do uzupelnienia --></code>. Wszystko co znajduje się pomiędzy <code><!--</code> i <code>--></code> uważane jest jako komentarz.</p>
<h2>Prolog</h2><br />
Dokument XML powinien zawierać prolog. Częścią prologu jest deklaracja <code><?xml version="1.0" encoding="UTF-8"?></code> zawiera ona informację o wersji XML, której używamy. Może także wskazać kodowanie znaków jakie zostało użyte w danym dokumencie. Wewnątrz prologu mogą znajdować się także deklaracje DTD (ang. <em>Document Type Declaration</em>) opisujące dany dokument. W opisie tym możemy na przykład określić, że element <code><artykul></code> powinien zawsze zawierac element <code><autor></code>.</p>
<h2>Pozostałe wymagania dotyczące formatu</h2><br />
Każdy element musi się poprawnie zamykać. Na przykład <code><autor>Marcin Pietraszek</autor></code>. Jeśli element nie ma treści, bądź innych zagnieżdżonych elementów zamyka się go w następujący sposób <code><opis status=&rdquo;do uzupelnienia&rdquo;/></code>.</p>
<p>Elementy powinny być poprawnie zagnieżdżone. Łatwiej będzie mi to wytłumaczyć na przykładzie. Poniżej możesz zobaczyć niepoprawny fragment dokumentu XML:</p>
<pre class="lang:default decode:true"><artykul><br />
   <tytul><br />
       <autor><br />
   </tytul><br />
       </autor><br />
</artykul></pre><br />
Zauważ, że element <code>tytul</code> zamknięty jest przed elementem <code>autor</code>. Jest to niepoprawny sposób zagnieżdżania elementów. Możemy powiedzieć, że elementy, które nie są poprawnie zagnieżdżone &ldquo;nachodzą&rdquo; na siebie.</p>
<p>Białe znaki pomiędzy elementami są ignorowane. W praktyce często używa się znaków tabulacji czy spacji do robienia "wcięć". Dzięki temu tak sformatowane dokumenty są bardziej czytelne.</p>
<h1>Rodzice, dzieci i rodzeństwo a XML</h1><br />
W przypadku poprawnie sformatowanych dokumentów XML możemy mówić o pewnych relacjach pomiędzy elementami. Specyfikacja XML mówi o rodzicach (ang. <em>parent</em>) i dzieciach (ang. <em>child</em>). W praktyce używa się także określenia rodzeństwo (ang. <em>sibling</em>).</p>
<p>Element może mieć wiele dzieci, na przykład element <code><kurs-java></code> ma czworo dzieci - dwa elementy <code><artykul></code>, element <code><opis></code> i element <code><wydawca:opis></code>.</p>
<p>Każdy element, poza elementem głównym, posiada dokładne jednego rodzica. Na przykład element <code><tytul></code> ma rodzica <code><artykul></code>.</p>
<p>Każdy element, poza elementem głównym, może mieć rodzeństwo. Na przykład rodzeństwem dla elementu <code><artykul></code> jest kolejny element <code><artykul></code>, <code><opis></code> i <code><wydawca:opis></code>.</p>
<h1>Walidacja dokumentów XML</h1><br />
Jak widzisz w dokumencie XML możemy zawrzeć praktycznie wszystko. Liczba dostępnych formatów jest nieskończona. W związku z tym istnieją różne mechanizmy pozwalające na walidację poprawności dokumentów XML.</p>
<p>Za przykład mogą tu posłużyć wspomniane wcześniej elementy DTD (ang. <em>Document Type Definition</em>) znajdujace się wewnątrz dokumentu XML.</p>
<p>Innym sposobem na walidację poprawnej struktury dokumentu XML jest używanie XSD (ang. <em>XML Schema Definition</em>). Jest to zewnętrzny plik, który także jest w formacie XML. Wewnątrz tego pliku możemy dokładnie określić strukturę jaką powinien mieć inny dokument XML.</p>
<p>Dzięki takiej walidacji możemy na przykład zastrzec, że zawsze wewnątrz elementu <code><artykul></code> musi znajdować się element <code><tytul></code> a element <code><autor></code> jest opcjonalny.</p>
<h1>Wady i zalety formatu XML</h1><br />
Główną zaletą pracy z dokumentami XML jest to, że istnieje mnóstwo narzędzi pozwalających na ich przetwarzanie. Dokumenty te są w miarę czytelne dla człowieka. Z łatwością format ten może służyć do wymiany informacji pomiędzy różnymi programami.</p>
<p>Niestety nie jest to format idealny. Przy pracy z dużymi plikami XML przekonasz się, że wcześniej wspomniana czytelność nie jest już tak oczywista. Ponadto pliki XML są dość &ldquo;rozwlekłe&rdquo;. Z racji konieczności zamykania każdego elementu, znaczników w dokumencie XML jest dużo i często to one znacząco zwiększają ostateczną wielkość dokumentu.</p>
<p>Ponadto dokumenty bardziej czytelne dla człowieka automatycznie zajmują więcej miejsca. To człowiek potrzebuje wcięć w dokumencie XML, dla programu używającego plików XML takie wcięcia są zbędne.</p>
<h1>Zastosowanie dokumentów w formacie XML</h1><br />
Z racji swojej dobrze zdefiniowanej struktury i ogromnego zestawu narzędzi dokumenty w formacie XML są bardzo popularne. Dedykowane narzędzia do pracy z XML dostępne są w wielu językach programowania. Dokumenty w formacie XML świetnie nadają się do zapisywania wszelkiego rodzaju ustawień.</p>
<p>Poniżej pokażę Ci kilka przykładowych zastosowań dokumentów w formacie XML:</p>
<ul>
<li>&ldquo;poprzednik&rdquo; <a href="http://www.samouczekprogramisty.pl/wstep-do-gradle/">opisanego przeze mnie Gradle&rsquo;a</a> - Maven używa XML w swoich plikach konfiguracyjnych - na przykład <code>settings.xml</code>, <code>profiles.xml</code> czy <code>plugin-registry.xml</code>. Główny plik konfiguracyjny dla projektu to także dokument XML - <code>pom.xml</code>,</li>
<li>w jednym z banków, w którym pracowałem dokumenty XML wraz z XSLT służyły do generowania wszystkich drukowanych dokumentów,</li>
<li>każda aplikacja na system Android używa plików XML. W uproszczeniu można powiedzieć, że opisują one wygląd ekranu aplikacji,</li>
<li>dokumenty ODT (format używany na przykład przez Open Office), czy DOCX (format używany przez Microsoft Word) to tak na prawdę pliki zip, które wewnątrz zawierają dokumenty XML opisujące zawartość pliku, rozpakuj je a sam się przekonasz :)</li><br />
</ul></p>
<h1>Na XML świat się nie kończy</h1><br />
Oczywiście dokumenty XML nie są jedynym formatem, który może pomóc w wymianie danych. Poniżej wspominam o kilku innych formatach, które mogą być także użyte w tym celu.</p>
<ul>
<li>CSV - (ang. <em>Comman Separated Values</em>) zwykły plik tekstowy, w którym każdy wiersz zawiera dane oddzielone przecinkami [2. Istnieją też inne wersje gdzie przecinek zastąpiony jest średnikiem czy znakiem tabulacji]. Z racji tego, że jest to plik tekstowy można go z łatwością odczytać używając edytora tekstu.</li>
<li><a href="http://www.yaml.org/" target="_blank">YAML</a> - (ang. <em>Yet Another Markup Language</em> lub <em>YAML Ain&rsquo;t Markup Language</em>) tekstowy format, w którym możemy zapisywać bardziej złożone struktury czy kolekcje.</li>
<li><a href="http://www.json.org/" target="_blank">JSON</a> - (ang. <em>JavaScript Object Notation</em>) podobnie jak YAML jest w stanie opisać listę elementów czy kolekcję par klucz-wartość. Format ten, jak jego nazwa wskazuje, powstał na potrzeby JavaScript, jednak obecne jest szeroko stosowany także w innych językach. Jest to format tekstowy.</li><br />
</ul><br />
Oczywiście poza formatami tekstowymi istnieją też formaty binarne:</p>
<ul>
<li><a href="https://developers.google.com/protocol-buffers/" target="_blank">ProtocolBuffers</a> - binarny format opracowany przez Google. Pozwala na zapisanie praktycznie dowolnych struktur. Z racji tego, że jest to format binarny jest bardziej &ldquo;zwięzły&rdquo; od wspomnianych powyżej. Oczywiście nie można odczytać tego formatu bez odpowiedniego &ldquo;dekodowania&rdquo; zawartości,</li>
<li><a href="https://avro.apache.org/" target="_blank">Avro</a> - binarny format serializacji danych, podobnie jak ProtoclBuffers zapewnia dużo bardziej zwięzłą reprezentację danych. Ma wbudowany mechanizm kompresji co pozwala na jeszcze większe zmniejszenie objętości dokumentów.</li><br />
</ul><br />
Bynajmniej nie są to wszystkie dostępne formaty wymiany danych. Wspomniałem o tych kilku aby pokazać Ci, że na XML świat się nie kończy :) Każdy z tych formatów dorobił się szerokiego wsparcia w różnych językach programowania.</p>
<h1>Inne specyfikacje i narzędzia związane z XML</h1><br />
XML jako dość dojrzały format zapisu danych &ldquo;dorobił się&rdquo; zestawu narzędzi i specyfikacji. Na początek ten zestaw może okazać się przytłaczający, ale spokojnie - nie wszystkich tych narzędzi używa się w każdym projekcie. W większości przypadków wystarczy wiedza o poprawnym formacie dokumentu XML i znajomość jednego z narzędzi do tworzenia/czytania plików XML.</p>
<p>Lista poniżej to specyfikacje/narzędzia pozwalające na parsowanie i tworzenie plików w formacie XML:</p>
<ul>
<li><a href="https://www.w3.org/DOM/" target="_blank">DOM</a> (ang. <em>Document Object Model</em>),</li>
<li><a href="http://www.saxproject.org/" target="_blank">SAX</a> (ang. <em>Simple API for XML</em>),</li>
<li>StAX (ang. <em>Streaming API for XML</em>),</li>
<li><a href="https://jaxb.java.net/" target="_blank">JAXB</a> (ang. <em>Java Architecture for XML Binding</em>).</li><br />
</ul><br />
W jednym z klejnych artykułów skupię się na praktycznym wykorzystaniu powyższych narzędzi.</p>
<p>Dodatkowo możesz też zainteresować się następującymi specyfikacjami związanymi z XML. Przydają się one w bardziej zaawansowanej pracy z dokumentami XML:</p>
<ul>
<li><a href="https://www.w3.org/TR/xmlschema-1/" target="_blank">XSD</a> (ang. <em>XML Schema Definition</em>) - wcześniej wspomniana specyfikacja pomagająca w walidacji poprawności dokumentów XML,</li>
<li><a href="https://www.w3.org/TR/xpath/" target="_blank">XPath</a> (ang <em>XML Path Language</em>) - język pozwalający na wskazywanie elementów czy atrybutów w dokumencie XML, przy jego pomocy możesz na przykład określić "zwróć mi wszystkie elementy X, które mają atrybut Y o wartości Z",</li>
<li><a href="https://www.w3.org/TR/xslt" target="_blank">XSLT</a> (ang. <em><span class="_Tgc">Extensible Stylesheet Language Transformations</span></em>) - język służący do tranformowania dokumentów XML. Przy jego pomocy można przekształcić dokument XML do innych formatów, na przykład do pliku PDF.</li><br />
</ul></p>
<h1>Podsumowanie</h1><br />
Po przeczytaniu artykułu wiesz już czym jest XML. Poznałeś część dozwolonych konstrukcji, wiesz czym są elementy i jak wygląda poprawnie sformatowany dokument XML. Potrafisz wskazać praktyczne zastosowania tego formatu, znasz też kilka jego zalet i wad. Przed Tobą użycie XML w praktyce, ale to już temat na kolejny artykuł :).</p>
<p>Mam nadzieję, że artykuł przypadł Ci do gustu. Jeśli nie chcesz pominąć kolejnych artykułów dopisz się do mojego newslettera i polub Samouczka na facebooku.</p>
<p>Na koniec mam do Ciebie standardową prośbę, podziel się linkiem do artykułu ze znajomymi, zależy mi na dotarciu do jak największej liczby samouków, którzy chcą pogłębiać swoją wiedzę. Do następnego razu!</p>
<p>[FM_form id="3"]</p>
<p>Zdjęcie dzięki uprzejmości https://www.flickr.com/photos/stanzim/27926733595/sizes/l</p>
