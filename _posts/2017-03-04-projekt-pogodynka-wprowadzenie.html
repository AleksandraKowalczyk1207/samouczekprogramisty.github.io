---
layout: post
status: publish
published: true
title: Projekt Pogodynka - wprowadzenie
author:
  display_name: Marcin Pietraszek
  login: marcin
  email: m.pietraszek@gmail.com
  url: ''
author_login: marcin
author_email: m.pietraszek@gmail.com
excerpt: "W artykule tym przeczytasz o &ldquo;architekturze&rdquo; Pogodynki. Projektu,
  w kt&oacute;rym chcę udostępnić odczyty temperatury na żywo.\r\n\r\n"
wordpress_id: 761
wordpress_url: http://www.samouczekprogramisty.pl/?p=761
date: '2017-03-04 13:42:38 +0100'
date_gmt: '2017-03-04 12:42:38 +0100'
categories:
- DSP2017
- Projekty
- Pogodynka
tags: []
---
<p>W artykule tym przeczytasz o &ldquo;architekturze&rdquo; Pogodynki. Projektu, w kt&oacute;rym chcę udostępnić odczyty temperatury na żywo.</p>
<p><a id="more"></a><a id="more-761"></a></p>
<h1>Opis architektury<&#47;h1><br />
Więc pracę nad Pogodynką czas zacząć. Zacznę od tego, że przybliżę Ci moje plany dotyczące zakresu projektu.</p>
<h2>Hardware<&#47;h2><br />
Stare Raspberry PI (nazwijmy je Malinką ;)) wygrzebane gdzieś z szafy ma posłużyć jako "mini komputer", do kt&oacute;rego podłączę czujnik temperatury. Czujnik ten będę musiał sam oprogramować - kupiłem go jakiś czas temu w sklepie dla elektronik&oacute;w.</p>
<p><a href="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;hardware03_web.jpeg"><img class="aligncenter wp-image-764 size-medium" src="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;hardware03_web-300x225.jpeg" alt="pogodynka - raspberry pi" width="300" height="225" &#47;><&#47;a></p>
<p>Jak widzisz czujnik jest całkiem drobny.</p>
<p><a href="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;hardware02_web.jpeg"><img class="aligncenter wp-image-763 size-medium" src="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;hardware02_web-300x225.jpeg" alt="czujnik temperatury" width="300" height="225" &#47;><&#47;a></p>
<p>Całość na początku połączę kabelkami, może jak starczy czasu pobawię sę w lutowanie a może nawet w wytrwawienie swojej płytki. Czas pokaże :)</p>
<h2>Software<&#47;h2><br />
Kolejnym krokiem będzie napisanie prostego programu, kt&oacute;ry będzie odpalany na Malince. Nazwijmy go Termometrem. Zadaniem programu będzie pobieranie odczytu czujnika - odczytanie aktualnego poziomu temperatury. Następnie to wskazanie chcę wysłać do aplikacji webowej, kt&oacute;ra doda dany odczyt do bazy.</p>
<p>Ta sama aplikacja webowa odpowiedzialna będzie za udostępnienie dodatkowego interfejsu. Interfejs ten będzie udostępniał historię wskazań temperatury.Więc na tym etapie mamy dwie osobne aplikacje. Pierwsza z nich to Termometr uruchamiany z linii poleceń, bez żadnego interfejsu graficznego. Druga z nich to aplikacja webowa, kt&oacute;ra udostępni interfejs dodawania wskazania temperatury oraz pobrania historii odczyt&oacute;w. Tu także nie będzie żadnego interfejsu graficznego.</p>
<p>Ostatnim etapem będzie interfejs użytkownika, kt&oacute;ry będzie prezentował historyczne odczyty w formie graf&oacute;w. Tu też pojawią się trudności - ten etap to aplikacja napisana w JavaScript, za kt&oacute;rym niestety nie przepadam ;)</p>
<p>Składając te klocki w całość projekt można pokazać na takim uproszczonym diagramie.</p>
<p><a href="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;pogodynka-diagram.png"><img class="aligncenter wp-image-765 size-medium" src="http:&#47;&#47;www.samouczekprogramisty.pl&#47;wp-content&#47;uploads&#47;2017&#47;03&#47;pogodynka-diagram-300x103.png" alt="pogodynka diagram architektury" width="300" height="103" &#47;><&#47;a></p>
<p>Wymyśliłem taką architekturę, ponieważ nie mam publicznego IP i nie m&oacute;głbym aplikacji webowej "wystawić na świat" jeśli uruchomiona byłaby na Malince.</p>
<p>[idea]Tutaj drobna dygresja dla początkujących. Każda strona internetowa, na przykład <a href="http:&#47;&#47;www.samouczekprogramisty.pl">www.samouczekprogramisty.pl<&#47;a> utrzymywana jest na serwerze. Serwer ten ma tak zwany adres IP. Upraszczając możemy powiedzieć, że jest to jakaś liczba. Istnieje mechanizm, kt&oacute;ry pozwala na "tłumaczenie" adresu strony internetowej na adres IP, nazywa się on DNS (ang. <em>Domain Name System<&#47;em>). Dzięki temu nie musimy zapamiętywać liczb żeby zobaczyć stronę internetową. Wystarczy, że pamiętamy jej adres. Publiczny adres IP to nic innego jak taki numer, kt&oacute;ry jest stały. Dzięki temu, że adres IP się nie zmienia mapowanie adresu strony na adres IP zawsze jest poprawne.[&#47;idea]</p>
<h1>Baza danych<&#47;h1><br />
Nasze dane to nic innego jak standardowe szeregi czasowe (ang. <em>time series<&#47;em>). Istnieją dedykowane bazy danych, kt&oacute;re bardzo dobrze dają sobie radę z danymi tego typu. Jednak żeby niepotrzebnie nie komplikować samej aplikacji dane będą zapisywane w najzwyklejszej relacyjnej bazie danych. Zdaję sobie sprawę, że z czasem danych może być sporo - jednak baza relacyjna powinna dać sobie z taką ilością bez problemu radę.</p>
<p>Zakładając odczyty temperatury co 5 minut dopiero po prawie dziesięciu latach dojdziemy do miliona rekord&oacute;w ;). Oczywiście interfejs zwracający historię, będzie musiał dokonywać pewnego rodzaju agregacji, ale o tym będę decydował p&oacute;źniej.</p>
<h1>Postęp prac<&#47;h1><br />
Cały postęp prac nad projektem wraz z zadaniami, kt&oacute;re będę realizował możesz śledzić w Trello: <a href="https:&#47;&#47;trello.com&#47;b&#47;yqZHTqSN&#47;pogodynka" target="_blank">https:&#47;&#47;trello.com&#47;b&#47;yqZHTqSN&#47;pogodynka<&#47;a>. Jest to proste narzędzie pomagające w śledzeniu zadań. W "prawdziwych" projektach programistycznych też używa się takich narzędzi, czasami dużo bardziej rozbudowanych.</p>
<p>Zacząłem od tego, że p&oacute;ł nocy spędziłem na pr&oacute;bie zmuszenia Malinki do wsp&oacute;łpracy, oczywiście się to nie udało ;). Więc żeby pchnąć całość do przodu zacząłem od innego komponentu - Termometru.</p>
<p>Jeśli jesteś zainteresowany postępem prac nad kodem zachęcam do zajrzenia do repozytorium: <a href="https:&#47;&#47;github.com&#47;SamouczekProgramisty&#47;Pogodynka" target="_blank">https:&#47;&#47;github.com&#47;SamouczekProgramisty&#47;Pogodynka<&#47;a>. Aktualnie znajduje się tam zestaw kilku obiekt&oacute;w, kt&oacute;re reprezentują pomiar temperatury. Pomiar ten jest transformowany do formatu JSON i wysyłany jako żądanie HTTP.</p>
<h2>Testy<&#47;h2><br />
Do testowania całego rozwiązania, poza testami jednostkowymi, użyłem usługi <a href="http:&#47;&#47;requestb.in" target="_blank">http:&#47;&#47;requestb.in<&#47;a>, kt&oacute;ra pozwala na sprawdzanie wysyłanych żądań. Wygląda na to, że całość działa. Brakuje tu oczywiście warstwy uwierzytelniania. Nie chcę, żeby każdy m&oacute;gł wysłać żądanie na adres, kt&oacute;ry będzie akceptował odczyty temperatury.</p>
<h1>Podsumowanie<&#47;h1><br />
Na koniec możesz zadać sobie pytanie. Do czego jest MI to potrzebne? Po co mam czytać tę serię artykuł&oacute;w? Pytania są jak najbardziej zasadne. Wydaje mi się, że mam też na te pytania dobrą odpowiedź ;). Moim zdaniem nie ma lepszego sposobu nauki programowania, niż na rzeczywistych problemach, kt&oacute;re pojawiają się właśnie w takich projektach. Poza tym każdy programista w swoim życiu więcej kodu czyta niż pisze :).</p>
<p>Mam nadzieję, że artykuł przypadł Ci do gustu. Jeśli nie chcesz pominąć kolejnych artykuł&oacute;w dopisz się do mojego newslettera i polub Samouczka na facebooku.</p>
<p>Na koniec mam do Ciebie standardową prośbę, podziel się linkiem do artykułu ze znajomymi, zależy mi na dotarciu do jak największej liczby samouk&oacute;w, kt&oacute;rzy chcą pogłębiać swoją wiedzę. Do następnego razu!</p>
<p>[FM_form id="3"]</p>
